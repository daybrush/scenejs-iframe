/*
Copyright (c) 2019 Daybrush
name: @scenejs/iframe
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/scenejs-iframe.git
version: 0.0.3
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("scenejs")):"function"==typeof define&&define.amd?define(["scenejs"],t):(e=e||self).IframeItem=t(e.Scene)}(this,function(e){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var t="string";function n(e,t,n,s){e.addEventListener(t,n,s)}function i(e,t){e.postMessage("scene:"+t,"*")}function o(e){if(function(e){return typeof e===t}(e))return/(?<=^scene\:)([^:]+)(?:\:([^:]+))*/g.exec(e)}n(window,"message",function(e){var t=o(e.data);t&&"ready"===t[0]&&i(e.source,"end")});var r=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}!function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,o);var t=e.prototype;return t.setTime=function(e,t,n,s){o.prototype.setTime.call(this,e,t,n,s);var r=this.getIterationTime();return this.sendMessage((t?"animate":"time")+":"+r),this},t.end=function(){return o.prototype.end.call(this),this.sendMessage("end"),this},t.pause=function(){return o.prototype.pause.call(this),this.sendMessage("pause"),this},t.start=function(e){var t=o.prototype.start.call(this,e);return this.sendMessage("start"),t},t.sendMessage=function(t){this.getElements().forEach(function(e){e.contentWindow&&i(e.contentWindow,t)})},e}(e.SceneItem);return r.register=function(r){window.parent&&window!==window.parent&&window.parent.postMessage&&i(window.parent,"ready"),n(window,"message",function(e){var t=o(e.data);if(t){var n=t[1],s=t[2];switch(n){case"start":r.start(0);break;case"pause":r.pause();break;case"end":r.finish();break;case"time":case"animate":r.setTime(parseFloat(s),"animate"===n,!0)}}})},r});
//# sourceMappingURL=iframe.min.js.map
